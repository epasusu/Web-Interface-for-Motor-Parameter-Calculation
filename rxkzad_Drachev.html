<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Расчет параметров асинхронного двигателя</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            margin: 0;
            padding: 20px;
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #2c3e50, #4a6491);
            color: white;
            padding: 25px 30px;
        }
        
        h1 {
            margin: 0 0 10px 0;
            font-size: 28px;
        }
        
        .subtitle {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 0;
        }
        
        .content {
            display: flex;
            flex-wrap: wrap;
            padding: 0;
        }
        
        .input-section {
            flex: 1;
            min-width: 300px;
            padding: 30px;
            border-right: 1px solid #eee;
        }
        
        .results-section {
            flex: 1.5;
            min-width: 400px;
            padding: 30px;
            background-color: #f9fafc;
        }
        
        .input-group {
            margin-bottom: 25px;
        }
        
        h2 {
            color: #2c3e50;
            border-bottom: 2px solid #4a6491;
            padding-bottom: 8px;
            margin-top: 0;
            font-size: 22px;
        }
        
        .input-row {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 15px;
            gap: 15px;
        }
        
        .input-field {
            flex: 1;
            min-width: 200px;
        }
        
        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        input[type="number"], input[type="text"] {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
            transition: border 0.3s;
        }
        
        input[type="number"]:focus, input[type="text"]:focus {
            border-color: #4a6491;
            outline: none;
            box-shadow: 0 0 0 2px rgba(74, 100, 145, 0.2);
        }
        
        .units {
            margin-left: 5px;
            color: #666;
            font-style: italic;
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 14px 28px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .calculate-btn {
            background-color: #2c3e50;
            color: white;
            flex: 1;
        }
        
        .calculate-btn:hover {
            background-color: #4a6491;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .reset-btn {
            background-color: #e74c3c;
            color: white;
            flex: 1;
        }
        
        .reset-btn:hover {
            background-color: #c0392b;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .results-container {
            margin-top: 20px;
        }
        
        .result-category {
            margin-bottom: 25px;
        }
        
        .result-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 15px;
            background-color: white;
            margin-bottom: 8px;
            border-radius: 5px;
            border-left: 4px solid #4a6491;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .result-label {
            font-weight: 600;
            color: #2c3e50;
        }
        
        .result-value {
            font-weight: 600;
            color: #2c3e50;
            text-align: right;
        }
        
        .result-unit {
            margin-left: 5px;
            color: #666;
        }
        
        .highlight {
            background-color: #e8f4fc;
            border-left-color: #3498db;
        }
        
        .section-title {
            color: #2c3e50;
            font-size: 18px;
            margin-bottom: 15px;
            padding-bottom: 5px;
            border-bottom: 1px solid #eee;
        }
        
        .copyright {
            margin-top: 30px;
            padding: 15px;
            text-align: center;
            font-size: 14px;
            color: #666;
            border-top: 1px solid #eee;
        }
        
        @media (max-width: 768px) {
            .content {
                flex-direction: column;
            }
            
            .input-section {
                border-right: none;
                border-bottom: 1px solid #eee;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Расчет параметров асинхронного двигателя</h1>
            <p class="subtitle">Расчет активных и реактивных сопротивлений статора и ротора по каталожным данным</p>
        </header>
        
        <div class="content">
            <div class="input-section">
                <h2>Исходные данные двигателя</h2>
                
                <div class="input-group">
                    <div class="input-row">
                        <div class="input-field">
                            <label for="tip">Тип двигателя <span class="units">(обозначение)</span></label>
                            <input type="text" id="tip" value="4MTKF(H)200L6">
                        </div>
                        <div class="input-field">
                            <label for="pp">Число пар полюсов <span class="units">(ед.)</span></label>
                            <input type="number" id="pp" value="3" step="1" min="1">
                        </div>
                    </div>
                    
                    <div class="input-row">
                        <div class="input-field">
                            <label for="u1n">Номинальное фазное напряжение <span class="units">(В)</span></label>
                            <input type="number" id="u1n" value="220" step="0.1" min="1">
                        </div>
                        <div class="input-field">
                            <label for="f1n">Номинальная частота <span class="units">(Гц)</span></label>
                            <input type="number" id="f1n" value="50" step="0.1" min="1">
                        </div>
                    </div>
                    
                    <div class="input-row">
                        <div class="input-field">
                            <label for="Pn">Номинальная мощность <span class="units">(Вт)</span></label>
                            <input type="number" id="Pn" value="22000" step="100" min="1">
                        </div>
                        <div class="input-field">
                            <label for="nn">Номинальная скорость <span class="units">(об/мин)</span></label>
                            <input type="number" id="nn" value="935" step="1" min="1">
                        </div>
                    </div>
                    
                    <div class="input-row">
                        <div class="input-field">
                            <label for="I1n">Номинальный ток статора <span class="units">(А)</span></label>
                            <input type="number" id="I1n" value="51" step="0.1" min="0.1">
                        </div>
                        <div class="input-field">
                            <label for="kpdn">Номинальный КПД <span class="units">(о.е.)</span></label>
                            <input type="number" id="kpdn" value="0.83" step="0.01" min="0.1" max="1">
                        </div>
                    </div>
                    
                    <div class="input-row">
                        <div class="input-field">
                            <label for="cosfi1n">Номинальный cos φ <span class="units">(о.е.)</span></label>
                            <input type="number" id="cosfi1n" value="0.79" step="0.01" min="0.1" max="1">
                        </div>
                        <div class="input-field">
                            <label for="Mk">Критический момент <span class="units">(Н·м)</span></label>
                            <input type="number" id="Mk" value="760" step="1" min="1">
                        </div>
                    </div>
                    
                    <div class="input-row">
                        <div class="input-field">
                            <label for="Mp">Пусковой момент <span class="units">(Н·м)</span></label>
                            <input type="number" id="Mp" value="706" step="1" min="1">
                        </div>
                        <div class="input-field">
                            <label for="I1p">Пусковой ток статора <span class="units">(А)</span></label>
                            <input type="number" id="I1p" value="275" step="1" min="1">
                        </div>
                    </div>
                </div>
                
                <div class="buttons">
                    <button class="calculate-btn" id="calculateBtn">Рассчитать параметры</button>
                    <button class="reset-btn" id="resetBtn">Сбросить значения</button>
                </div>
            </div>
            
            <div class="results-section">
                <h2>Результаты расчета</h2>
                
                <div class="results-container">
                    <div class="section-title">Основные параметры двигателя</div>
                    
                    <div class="result-category">
                        <div class="result-row">
                            <div class="result-label">Номинальный момент</div>
                            <div class="result-value"><span id="Mn">-</span> <span class="result-unit">Н·м</span></div>
                        </div>
                        
                        <div class="result-row">
                            <div class="result-label">Номинальное скольжение</div>
                            <div class="result-value"><span id="sn">-</span> <span class="result-unit">о.е.</span></div>
                        </div>
                        
                        <div class="result-row">
                            <div class="result-label">Критическое скольжение</div>
                            <div class="result-value"><span id="sk">-</span> <span class="result-unit">о.е.</span></div>
                        </div>
                        
                        <div class="result-row">
                            <div class="result-label">Номинальная синхронная скорость</div>
                            <div class="result-value"><span id="won">-</span> <span class="result-unit">рад/с</span></div>
                        </div>
                        
                        <div class="result-row">
                            <div class="result-label">Номинальная скорость</div>
                            <div class="result-value"><span id="wn">-</span> <span class="result-unit">рад/с</span></div>
                        </div>
                    </div>
                    
                    <div class="section-title">Расчетные сопротивления</div>
                    
                    <div class="result-category">
                        <div class="result-row highlight">
                            <div class="result-label">Активное сопротивление статора</div>
                            <div class="result-value"><span id="r1">-</span> <span class="result-unit">Ом</span></div>
                        </div>
                        
                        <div class="result-row highlight">
                            <div class="result-label">Активное сопротивление ротора (приведенное)</div>
                            <div class="result-value"><span id="r2p">-</span> <span class="result-unit">Ом</span></div>
                        </div>
                        
                        <div class="result-row">
                            <div class="result-label">Индуктивное сопротивление рассеяния статора</div>
                            <div class="result-value"><span id="x1">-</span> <span class="result-unit">Ом</span></div>
                        </div>
                        
                        <div class="result-row">
                            <div class="result-label">Индуктивное сопротивление рассеяния ротора (приведенное)</div>
                            <div class="result-value"><span id="x2">-</span> <span class="result-unit">Ом</span></div>
                        </div>
                        
                        <div class="result-row highlight">
                            <div class="result-label">Индуктивное сопротивление контура намагничивания</div>
                            <div class="result-value"><span id="xmn">-</span> <span class="result-unit">Ом</span></div>
                        </div>
                        
                        <div class="result-row">
                            <div class="result-label">Полное индуктивное сопротивление короткого замыкания</div>
                            <div class="result-value"><span id="xk">-</span> <span class="result-unit">Ом</span></div>
                        </div>
                    </div>
                    
                    <div class="section-title">Токи и моменты</div>
                    
                    <div class="result-category">
                        <div class="result-row">
                            <div class="result-label">Ток намагничивания в номинальной точке</div>
                            <div class="result-value"><span id="Imn">-</span> <span class="result-unit">А</span></div>
                        </div>
                        
                        <div class="result-row">
                            <div class="result-label">Номинальная ЭДС статора</div>
                            <div class="result-value"><span id="E1n">-</span> <span class="result-unit">В</span></div>
                        </div>
                        
                        <div class="result-row">
                            <div class="result-label">Номинальный электромагнитный момент</div>
                            <div class="result-value"><span id="Memn">-</span> <span class="result-unit">Н·м</span></div>
                        </div>
                        
                        <div class="result-row">
                            <div class="result-label">Потери момента в номинальном режиме</div>
                            <div class="result-value"><span id="dMxn">-</span> <span class="result-unit">Н·м</span></div>
                        </div>
                    </div>
                    
                    <div class="copyright">
                        &copy; Драчев Геннадий Иванович
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Основные константы
        const PI = 3.1416;
        
        // Элементы формы
        const tipInput = document.getElementById('tip');
        const ppInput = document.getElementById('pp');
        const u1nInput = document.getElementById('u1n');
        const f1nInput = document.getElementById('f1n');
        const PnInput = document.getElementById('Pn');
        const nnInput = document.getElementById('nn');
        const I1nInput = document.getElementById('I1n');
        const kpdnInput = document.getElementById('kpdn');
        const cosfi1nInput = document.getElementById('cosfi1n');
        const MkInput = document.getElementById('Mk');
        const MpInput = document.getElementById('Mp');
        const I1pInput = document.getElementById('I1p');
        
        // Элементы результатов
        const MnElement = document.getElementById('Mn');
        const snElement = document.getElementById('sn');
        const skElement = document.getElementById('sk');
        const wonElement = document.getElementById('won');
        const wnElement = document.getElementById('wn');
        const r1Element = document.getElementById('r1');
        const r2pElement = document.getElementById('r2p');
        const x1Element = document.getElementById('x1');
        const x2Element = document.getElementById('x2');
        const xmnElement = document.getElementById('xmn');
        const xkElement = document.getElementById('xk');
        const ImnElement = document.getElementById('Imn');
        const E1nElement = document.getElementById('E1n');
        const MemnElement = document.getElementById('Memn');
        const dMxnElement = document.getElementById('dMxn');
        
        // Кнопки
        const calculateBtn = document.getElementById('calculateBtn');
        const resetBtn = document.getElementById('resetBtn');
        
        // Функция для форматирования чисел
        function formatNumber(num, decimals = 4) {
            if (isNaN(num) || !isFinite(num)) return '-';
            return num.toFixed(decimals);
        }
        
        // Основная функция расчета
        function calculateParameters() {
            // Получение значений из формы
            const tip = tipInput.value;
            const pp = parseFloat(ppInput.value);
            const u1n = parseFloat(u1nInput.value);
            const f1n = parseFloat(f1nInput.value);
            const Pn = parseFloat(PnInput.value);
            const nn = parseFloat(nnInput.value);
            const I1n = parseFloat(I1nInput.value);
            const kpdn = parseFloat(kpdnInput.value);
            const cosfi1n = parseFloat(cosfi1nInput.value);
            const Mk = parseFloat(MkInput.value);
            const Mp = parseFloat(MpInput.value);
            const I1p = parseFloat(I1pInput.value);
            
            // Проверка введенных данных
            if ([pp, u1n, f1n, Pn, nn, I1n, kpdn, cosfi1n, Mk, Mp, I1p].some(isNaN)) {
                alert('Пожалуйста, введите корректные числовые значения во все поля');
                return;
            }
            
            // 1. Расчетные данные двигателя
            const won = 2 * PI * f1n / pp; // Номинальная синхронная скорость, рад/с
            const wn = nn / 9.55;          // Номинальная скорость, рад/с
            const Mn = Pn / wn;            // Номинальный момент, Нм
            const sn = (won - wn) / won;   // Номинальное скольжение
            const Mko = Mk / Mn;           // Критический момент, о.е.
            const Mpo = Mp / Mn;           // Пусковой момент, о.е.
            const I1po = I1p / I1n;        // Пусковой ток статора, о.е.
            
            // 2. Приведенное активное сопротивление ротора r2p
            const dPmex = Pn * (1 / kpdn - 1) / 6;  // Механические потери
            const Pmex = Pn + dPmex;
            const r2p = Pmex * sn / (3 * (1 - sn) * Math.pow(I1n * cosfi1n, 2));
            
            // 3. Активное сопротивление фазной обмотки статора r1
            const dP2n = 3 * Math.pow(I1n * cosfi1n, 2) * r2p;
            const Pemn = dP2n / sn;
            const Memn1 = Pemn / won;  // Первое вычисление Memn
            
            const a1 = 1;
            
            // Расчет критического скольжения sk (по формуле из MATLAB-скрипта)
            const skNumerator = Mko + Math.sqrt(Math.pow(Mko, 2) - 1 + 2 * a1 * sn * (Mko - 1));
            const skDenominator = 1 - 2 * sn * a1 * (Mko - 1);
            const sk = sn * (skNumerator / skDenominator);
            
            // Расчет коэффициента a
            const a = (Memn1 * (sn / sk + sk / sn) - 2 * Mk) / (2 * sk * (Mk - Memn1));
            
            // Активное сопротивление статора r1
            const r1 = r2p * a;
            
            // 4. Индуктивные сопротивления рассеяния статора и приведенного ротора
            const xk = r2p * Math.sqrt(1 - Math.pow(a * sk, 2)) / sk;
            const x1 = xk / 2;
            const x2 = xk / 2;
            
            // 5. Ток намагничивания в номинальной точке по формуле В.А. Шубенко
            const sinfi1n = Math.sqrt(1 - Math.pow(cosfi1n, 2));
            const Imn = I1n * (sinfi1n - cosfi1n * sn / sk);
            
            // 6. Индуктивное сопротивление контура намагничивания
            const xmn = u1n / Imn - x1;
            
            // 7. Номинальная ЭДС статора
            const E1n = Imn * xmn;
            
            // 8. Номинальный электромагнитный момент (второе вычисление)
            const Memn = 2 * Mk * (1 + a * sk) / (sn / sk + sk / sn + 2 * a * sk);
            
            // 9. Потери момента в номинальном режиме, Нм
            const dMxn = Memn - Mn;
            
            // Вывод результатов
            MnElement.textContent = formatNumber(Mn, 2);
            snElement.textContent = formatNumber(sn);
            skElement.textContent = formatNumber(sk);
            wonElement.textContent = formatNumber(won, 2);
            wnElement.textContent = formatNumber(wn, 2);
            r1Element.textContent = formatNumber(r1);
            r2pElement.textContent = formatNumber(r2p);
            x1Element.textContent = formatNumber(x1);
            x2Element.textContent = formatNumber(x2);
            xmnElement.textContent = formatNumber(xmn);
            xkElement.textContent = formatNumber(xk);
            ImnElement.textContent = formatNumber(Imn, 2);
            E1nElement.textContent = formatNumber(E1n, 2);
            MemnElement.textContent = formatNumber(Memn, 2);
            dMxnElement.textContent = formatNumber(dMxn, 2);
            
            console.log('Расчет завершен успешно');
            console.log('Тип двигателя:', tip);
            console.log('r1 =', r1, 'Ом');
            console.log('r2p =', r2p, 'Ом');
            console.log('x1 =', x1, 'Ом');
            console.log('x2 =', x2, 'Ом');
            console.log('xmn =', xmn, 'Ом');
        }
        
        // Функция сброса значений к исходным
        function resetValues() {
            tipInput.value = "4MTKF(H)200L6";
            ppInput.value = 3;
            u1nInput.value = 220;
            f1nInput.value = 50;
            PnInput.value = 22000;
            nnInput.value = 935;
            I1nInput.value = 51;
            kpdnInput.value = 0.83;
            cosfi1nInput.value = 0.79;
            MkInput.value = 760;
            MpInput.value = 706;
            I1pInput.value = 275;
            
            // Сброс результатов
            const resultElements = [
                MnElement, snElement, skElement, wonElement, wnElement,
                r1Element, r2pElement, x1Element, x2Element, xmnElement,
                xkElement, ImnElement, E1nElement, MemnElement, dMxnElement
            ];
            
            resultElements.forEach(el => {
                el.textContent = '-';
            });
            
            console.log('Значения сброшены к исходным');
        }
        
        // Обработчики событий
        calculateBtn.addEventListener('click', calculateParameters);
        resetBtn.addEventListener('click', resetValues);
        
        // Автоматический расчет при загрузке страницы
        window.addEventListener('DOMContentLoaded', () => {
            // Можно включить автоматический расчет при загрузке
            // calculateParameters();
            console.log('Веб-приложение для расчета параметров асинхронного двигателя загружено');
        });
    </script>
</body>
</html>